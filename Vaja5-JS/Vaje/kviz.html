<!DOCTYPE html>
<html lang="sl">
<head>
<meta charset="UTF-8">
<title>Kviz</title>
    <style>
    body{
        font-family: Arial;
        background: #eee;
        display: grid;
        place-items: center;
        height: 100vh;
    }

    #box{
        background: white;
        padding: 20px;
        width: 400px;
        border-radius: 10px;
        text-align: center;
    }

    .answer{
        display: block;
        width: 100%;
        margin: 8px 0;
        padding: 10px;
        cursor: pointer;
    }

    .correct{
        background: green;
        color: white;
    }

    .wrong{
        background: red;
        color: white;
    }

    button{
        border: none;
        padding: 15px;
        border-radius: 10px;
    }

    </style>
</head>
<body>
    <div id="box">

        <div id="start">
            <h2>Kviz</h2>
            <button onclick="startQuiz()">Začni</button>
        </div>

        <div id="quiz" style="display:none;">
            <p id="timer"></p>
            <h3 id="question"></h3>

            <button class="answer" onclick="checkAnswer(0)" id="a"></button>
            <button class="answer" onclick="checkAnswer(1)" id="b"></button>
            <button class="answer" onclick="checkAnswer(2)" id="c"></button>
            <button class="answer" onclick="checkAnswer(3)" id="d"></button>

            <p id="info"></p>
            <button onclick="nextQuestion()">Naprej</button>
        </div>

        <div id="end" style="display:none;">
            <h2>Konec kviza</h2>
            <p id="result"></p>
            <button onclick="startQuiz()">Ponovi</button>
        </div>

    </div>

    <script>
    var questions = [
        ["Kaj pomeni HTML?", "Hyper Text Markup Language", "Home Tool", "High Text", "Hyper Tool", 0],
        ["Kateri jezik je za stil?", "HTML", "Java", "CSS", "Python", 2],
        ["Kaj dela JavaScript?", "Stil", "Logiko", "Barve", "Slike", 1],
        ["Kaj je localStorage?", "Datoteka", "Baza", "Shramba v brskalniku", "Program", 2],
        ["Katera oznaka je gumb?", "div", "button", "span", "p", 1]
    ];

    var index = 0;
    var score = 0;
    var time = 10;
    var timer;

    var startDiv = document.getElementById("start");
    var quizDiv = document.getElementById("quiz");
    var endDiv = document.getElementById("end");

    function startQuiz(){
        index = 0;
        score = 0;
        startDiv.style.display = "none";
        endDiv.style.display = "none";
        quizDiv.style.display = "block";
        showQuestion();
    }

    function showQuestion(){
        document.getElementById("info").innerHTML = "";
        resetButtons();

        document.getElementById("question").innerHTML = questions[index][0];
        document.getElementById("a").innerHTML = questions[index][1];
        document.getElementById("b").innerHTML = questions[index][2];
        document.getElementById("c").innerHTML = questions[index][3];
        document.getElementById("d").innerHTML = questions[index][4];

        startTimer();
    }

    function checkAnswer(choice){
        clearInterval(timer);

        var correct = questions[index][5];

        if (choice === correct){
            score++;
            document.getElementById("info").innerHTML = "Pravilno!";
            document.getElementById(getBtn(choice)).className += " correct";
        } else {
            document.getElementById("info").innerHTML = "Napačno!";
            document.getElementById(getBtn(choice)).className += " wrong";
            document.getElementById(getBtn(correct)).className += " correct";
        }

        disableButtons();
    }

    function nextQuestion(){
        index++;
        if (index < questions.length){
            showQuestion();
        } else {
            endQuiz();
        }
    }

    function startTimer(){
        time = 10;
        document.getElementById("timer").innerHTML = "Čas: " + time;

        timer = setInterval(function () {
            time--;
            document.getElementById("timer").innerHTML = "Čas: " + time;
            if (time === 0) {
                clearInterval(timer);
                nextQuestion();
            }
        }, 1000);
    }

    function endQuiz(){
        quizDiv.style.display = "none";
        endDiv.style.display = "block";

        var percent = Math.round((score / questions.length) * 100);
        document.getElementById("result").innerHTML =
            "Točke: " + score + " / " + questions.length + " (" + percent + "%)";

        localStorage.setItem("quizResult", percent);
    }

    function getBtn(i){
        if (i === 0) return "a";
        if (i === 1) return "b";
        if (i === 2) return "c";
        return "d";
    }

    function disableButtons(){
        document.getElementById("a").disabled = true;
        document.getElementById("b").disabled = true;
        document.getElementById("c").disabled = true;
        document.getElementById("d").disabled = true;
    }

    function resetButtons(){
        var buttons = document.getElementsByClassName("answer");
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].className = "answer";
            buttons[i].disabled = false;
        }
    }
    </script>
</body>
</html>
