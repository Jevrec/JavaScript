<!DOCTYPE html>
<html lang="sl">
<head>
<meta charset="UTF-8">
<title>TO-DO List</title>

<style>
body {
    display: grid;
    place-items: center;
    font-family: Arial;
}

.container {
    background: rgb(139, 139, 202);
    padding: 30px;
    border-radius: 10px;
    width: 400px;
}

input {
    width: 70%;
    padding: 10px;
    border-radius: 10px;
    border: none;
}

button {
    padding: 10px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
}

ul {
    list-style: none;
    padding: 0;
}

li {
    background: #eee;
    padding: 10px;
    margin: 5px 0;
    border-radius: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

li.completed {
    background: #888;
    color: white;
}

.actions button {
    margin-left: 5px;
}

.filters button {
    margin: 5px;
}
</style>
</head>
    <body>

    <div class="container">
        <h2>Moja To-Do lista</h2>

        <input id="taskInput" placeholder="Nova naloga">
        <button onclick="addTask()">Dodaj</button>

        <div class="filters">
            <button onclick="setFilter('all')">Vse</button>
            <button onclick="setFilter('completed')">Dokončane</button>
            <button onclick="setFilter('active')">Nedokončane</button>
        </div>

        <ul id="taskList"></ul>
    </div>

    <script>
    var tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    var filter = "all";

    function saveTasks() {
        localStorage.setItem("tasks", JSON.stringify(tasks));
    }

    function addTask() {
        const input = document.getElementById("taskInput");
        if (input.value == ""){
            alert("Vnesi nalogo!!!");
            return;
        }

        tasks.push({
            id: Date.now(),
            text: input.value,
            completed: false
        });

        input.value = "";
        saveTasks();
        prikazTasks();
    }

    function deleteTask(id) {
        tasks = tasks.filter(task => task.id != id);
        saveTasks();
        prikazTasks();
    }

    function toggleTask(id) {
        const task = tasks.find(t => t.id == id);

        if(task.completed == true){
            task.completed = false;
        }else if(task.completed == false){
            task.completed = true;
        }
        
        saveTasks();
        prikazTasks();
    }

    function editTask(id) {
        const task = tasks.find(t => t.id == id);
        const newText = prompt("Uredi nalogo:", task.text);
        if (newText != null && newText != ""){
            task.text = newText;
            saveTasks();
            prikazTasks();
        }
    }

    function setFilter(type) {
        filter = type;
        prikazTasks();
    }

    function prikazTasks() {
        const list = document.getElementById("taskList");
        list.innerHTML = "";
        var filteredTasks = tasks;

        if (filter == "completed"){
            filteredTasks = tasks.filter(t => t.completed);
        }else if (filter == "active"){
            filteredTasks = tasks.filter(t => !t.completed);
        }

        filteredTasks.forEach(task => {
            const li = document.createElement("li");
            if (task.completed){
                li.classList.add("completed");
            }

            li.innerHTML = `
                <span onclick="toggleTask(${task.id})">✔ ${task.text}</span>
                <div class="actions">
                    <button onclick="editTask(${task.id})">Uredi</button>
                    <button onclick="deleteTask(${task.id})">X</button>
                </div>
            `;
            list.appendChild(li);
        });
    }
    prikazTasks();
    </script>
</body>
</html>
